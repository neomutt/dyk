---
layout: concertina
title: Multi-Account Set-Up
description: 
date: 2020-10-07
---

# {{ page.title }}

{:.subtitle}
{{ page.description }}
{% include dyk-links.html %}

Here is one method of switching between IMAP accounts. Requires _Safe user/pass storage with Lastpass_.

**~/.config/neomutt/imap/imap.cfg**

```
# my default account
source ./gmail.cfg

# fast-switching between accounts
# use full-paths, as these are going to be executed at run-time,
# where there's no concept of a current source file directory.
macro index <F6"<enter-command>unmailboxes *<enter><enter-command>source ~/.config/neomutt/imap/hotmail.cfg<enter><sync-mailbox>"
macro index <F7"<enter-command>unmailboxes *<enter><enter-command>source ~/.config/neomutt/imap/gmail.cfg<enter><sync-mailbox>"
macro index <F8"<enter-command>unmailboxes *<enter><enter-command>source ~/.config/neomutt/imap/fastmail.cfg<enter><sync-mailbox>"

# common configuration valid for all accounts
set imap_check_subscribed = yes
set imap_authenticators = plain
set smtp_authenticators = plain

# guard to avoid double-loading on startup
set my_imap_done = true
```

**~/.config/neomutt/imap/gmail.cfg**

```
set my_imap = imaps://$my_gmail_user@imap.gmail.com:993

set imap_user = $my_gmail_user
set imap_pass = $my_gmail_pass

set folder    = $my_imap
set spoolfile = +Inbox
set postponed = +[Gmail]/Drafts
set record    = "+[Gmail]/Sent Mail"
set trash     = +[Gmail]/Trash
set move      = no

named-mailboxes "Inbox / GMail" +Inbox

set smtp_url  = smtps://$my_gmail_user@smtp.gmail.com
set smtp_pass = $my_gmail_pass
                                                                               
source ./post.cfg
```

**~/.config/neomutt/imap/fastmail.cfg**

```
set my_imap = imaps://$my_fastmail_user@imap.fastmail.com/

#set imap_user = $my_fastmail_user
set imap_pass = $my_fastmail_pass

set folder    = $my_imap
named-mailboxes "Inbox / FastMail" +Inbox
set spoolfile = +INBOX
set postponed = +Drafts
set record    = +Sent
set trash     = +Trash
set move      = no

set smtp_url  = smtps://$my_fastmail_user@smtp.fastmail.com
set smtp_pass = $my_fastmail_pass

source ./post.cfg
```

And so on for other IMAP accounts

**~/.config/neomutt/imap/post.cfg**

```
# Open the sourced account's Inbox
ifdef my_imap_done "push <change-folder>$my_imap<enter>"
```

Credit: [Pietro Cerutti](https://github.com/gahr)

